import { Component } from '@angular/core';
import { AdminService } from '../services/admin.service';
import { OnInit } from '@angular/core';
import { ToastrService } from 'ngx-toastr';
import { Router } from '@angular/router';

@Component({
  selector: 'app-profile',
  templateUrl: './profile.component.html',
  styleUrls: ['./profile.component.css']
})
export class ProfileComponent implements OnInit {

  profilePicture:string = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBw0ODw8PDxAODw8OEBAWEA8PDg8PEA4OFxEWFhURFRUYHSggGBslGxYVITEhJSkrLi4uFx8zOD8tNygvLysBCgoKDg0OGxAQGy0lICYvLS8rNS0tLSstLS0tLS0tLS0tLS0tLS4tLS0tLS0tLS0vLS0tLS0tLy0tLy0tLS0tNf/AABEIAOEA4QMBEQACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAAAQIEBQYHAwj/xABDEAACAgEBBAYGBgYJBQAAAAAAAQIDEQQFEiFBBjFRYXGBBxMiMpGhI0JSYnKxFIKSosHRFTNDY3OywvDxJFNUk6P/xAAaAQEAAwEBAQAAAAAAAAAAAAAAAwQFAgEG/8QANBEBAAIBAwIEBAUDAwUAAAAAAAECAwQRIRIxIjJBUWFxsfAFEzOBoZHB0SNC4RQVJDRS/9oADAMBAAIRAxEAPwDuIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWG1dr0aVJ2y9p+7XHjOfguzvfAiy5q448TulJt2aprOlupseKowpjyePWT+fD5GffW3ny8LNdPWO7H3a/VT9+6555Kc4J+UWkV7ajJbvaUsY6x6LOelhLjJSy+e/PPxk2R9c+7raFdVN0ONGotrf2XZKC+KeH5pHVc1q+svJpEsno+k20NO1G+Kuj95KMmvuzjwfwZax620d+UNsFZ7cNu2VtqjUrEW4T51z4S8uT8i9i1FMnEd1e+K1e7JE6MAAAAAAAAAAAAAAAAAAAAAAAYbpJttaSCUcSuszuRfUlznLuXZzfm1X1GeMdfikx4+ufg5Zt3b0aZOVjlfqbOLjvYfVwlOX1V2JLwSXEz8eG+eeqf6rVslccbNS1m29Xd71rhF/UpzVFd3B7z82zQppcdPTf5q1s17erGSqi224xbfW2k2/MsRx2RTyuNNfZV/VTnX/hzlD8ji2OtvNES6i0x2lntndLdTW0rVG6PbhQsXg1wfmvMqZNDS3k4+iauotHflu2xttUamP0clJfWqmsSj345eKMzLgvjnxQt0vW8cM1p9PXLjF47n1xf++ZBNph22TQamaW7ZmS5S5rx7fE0dLr/9uX+v+f8AKnlxV71ZJM11UAAAAAAAAAAAAAAAAAAAAB56i+NcJ2TeIwi5SfZFLLPLTERvL2I3nZxzpX0gkt/USw7rm1TB8VCK5tc4xTXjJ97MqlZ1GWZnt98LlpjFTaHPZylJuUm5Sk25Sk8uUn1tvmzViIiNoU5nfmQ9eJAASgPWi2dclOEpQnF5UovDTObVi0bTHD2JmJ3h0Lop0oV7VVuIXr3X1Ru8OyXdz5dixtVpJx+KvMfRew5ovxPdvWm2g0kpdXUn9l9j7jPmElscTO6/0e0oqW7J+y+p/Zf8jR0Wrmngv29Ph/x9EOXBxvDLm0pAAAAAAAAAAAAAAAAAAAAaz051bjTXRH3r58e+EcPH7Th8ynrcnTTb3T4K723cK23rv0i+c081r2auz1UW8Pzbcv1iXT4vy8cR6+rjLfqtusSdGkC92fsrUanPqoOSXXJtRin2ZZFkz0x+aXdMdrdntrthauiO9Ot7i65wamorvxxXiznHqceSdonl7bFavMwxxOjSgK4tppptNNYa4NPtQmNx0nod0gWqj6m5r18I8c9V1fb49vx8MPWab8qeqvb6NDBl642nuy+qlKt4bbXJvnH+fJ+XairG0ppbD0X2x61eom/bivYb+vDs8V+Rr6LPvHRb9lLPj28UNhL6sAAAAAAAAAAAAAAAAAADmfpN17jO9p4dNEYRx1qyx43l3r1kX+qZ2ePzNRWv37rWPw45lyJI0VVIHvo9O7bIVx67JRjnsy+s5veKVm0+j2sdU7OoaTTwqhGuCxGCwl/vmfPWtNp3lpxERG0LmKOXrSOl+w40NX1LFU3icUuFc31NdkX8n4pGvo9RN46Ld4/lSz4unxR2a2XldKA9tLfOqcLK3uzg04yXJnN6Res1t2l7W01neHWdla6Gv00bYJb6ypQzwjal7VbfY0+vvT60fO5cc4ck1lp1tF67wsHY6ZxnBtSi1KDaw13NdvWmvFHdLTE7x3czETDo2ydfDU0wuj9Ze0vszXCUfibuLJF6xaGfevTOy8JHIAAAAAAAAAAAAAAAAAcX9KFzc7vv6qKffGFUlj4qPwKGON9Tafv0hYvxiiHPy+rpAy3RdL9Moz2z+Pq5FbV/o2+/VLh88OjxRhtB6RR49Ua7Rq+qymXVZFrPZL6svJ4fkd48k0vFo9HN69VZhybDXWsNdafWn2H0bLSgKgNi6EbX/RtSoSf0WoajLL4Rn9SfxePB9xS12D8zH1R3j6LGnydNtvSW19Lq3Vixe7Y35WfWXmva8YzfMycM78Ld+Hp6Ndv41E9LN+zenKvL6rorivOKf7KNPS26bdPuq5o3jd040FYAAAAAAAAAAAAAAAAAOHekz+ua7dTqPzX8yjg/XusZP06tKLyuAXWzdR6m6q3lCcW/w59r5ZI8tOuk193VLdNol1SJ8803rFHj16RR4OUbXilqdSl1K+7H/skfR4f06/KPoy7+afmtUSOUoCcAdR0M3tTZbjnNyg45f/kQXst9m9wz3TZ89mp+Rn29P7S0a268e7mWm2hZRbC2HCymcZRzylF5SfwLsccwhfSOzdZDUU1X1+5dXCcfCUU8fM06z1RuqzG07Lk9eAAAAAAAAAAAAAAAADivpTq3bpd2of79e/8AwKWLjUXj79Fi/wClVoiLqukCcAb70P2srq1RN/S1LCz9etdTXeup+Rj63B0W647T9V7Bk6o6Z7tliigsGovhTCds+EK4uUvBcvF9Xme1pN7RWPV5a0VjeXIrbJTlKcvenKUpfiby/mz6WIiI2hlTO/KEeiQJA3P0aa7cvt07fC6G9H/Eh148Yt/smZ+J496xf24WtLbmatd6d6D9G196SxC1q2HhPjL97eXkRYLdVId2jaXUfQ5tJ3bOdMn7WlulFdvq5e3F/GUl+qaOCfDsrZI5b2TowAAAAAAAAAAAAAAAByv0u6T3p450WefGn8mUp8Opj4x9/RPHOL5OX4LqB76TTTunGutZnN4S/i+xHN7xSs2t2e1rNp2huWg6H0RSd0pWS5qL3ILwxx+ZlZNfeZ8PC5XTVjuxvSvZ8NJPT2adOrKksxlLKnFpp5bznEvkWNJlnLW1b8os9IpMTXh7aPptbGKVtULWvrRn6pvxW61nwwc3/DqzPhnb+XtdVMd4Y7bnSK/WJQaVdSefVxbe8+TlLnjyRYwaWmHnvKPJmm/HoxBZRJQEoCQL/YOq9RqtPb1KFsN78De7P91sh1FOvFaPg7x22vEto9Lej9nS3rrTnXJ9zW/H8pmNo7d4XcsHoS1m5q9TRnhdQpr8Vc8flY/gamCfFsrZI4dlLaAAAAAAAAAAAAAAAAAah6Rtn+uoWOuUbK/1pRzB+TiUtX4Zrk9pT4Od6+7hcXlJ9pdQNq6CadOd1rXuxjGL/E23/lXxM78QvxWq1po5mW6RRlLjB9N9Nv6Ny51ThLyfsf6l8C7oL7ZtveP+VfUxvTdR0j0umt0L1MYQc9ypxtS3ZcZxTzjr4NrDPdLfJXP+XM8c8PM1azj6jo1sKm7QKNseN05TUlwnDHsxcX4Rz5nup1NqZ96+nBixRbHz6tV21si3R2blnGLy4WJezZH+D7Vy+DNHBnrmrvH7quTHNJ2lYImcJAkA1wA6T01X6TseN3W0tNau5yxF/KxnzuGOjNNfnDQvzWJar6MLXXtbS9lnroPwdM2vnGJqYp8cK9/K74XlcAAAAAAAAAAAAAAAAWO29J67T2QXGWMx/HHil54x5kWenXjmrvHbptEvnvb2l9VqbYr3ZPfh+CfHh3J7y/VONLk68UT+zrNXpvLZugkfobX/AHv+hfzKP4h54+SxpvLLaYoz1l47T03raLq+c65pfix7Pzwd4b9GSLfFzeN6zDUNqaWxbM0KWfannd48ZWb04Z+L+Jp4b1nU5Jn724lUvWfyq/fdvWlpjRVCGUoU1pNvqUYx4t/DJk2mb3mfWZXYiKxt7NO1t+t2u5QorjHSwlwlNRjmS6m5PjvYfVHqT4mpSuLSc3nxT9/e6nab5uK9mI2p0b1mljv2Vp1rrsrlvxj4814tYLOLV4ss7Vnn4or4b05likWUSQAHS0vWbAafLSP/AOb4f5T5/Jxqp+a/HOOGm9BVjaeif98vnFr+JoY/PCG/ll9AmgrAAAAAAAAAAAAAAAAAByD0n7F9XN2xXCDzwX9jN/6Z8Mdkmyjj/wBLPNPS3MfP7/ssW8eOLesNN2Xta/St+rkt1vMoSWYyf5p+BYy4KZfMjpktTs2/ZfSvT24jb9BPtk81v9bl5mZl0OSvNeY/lapqKz34bJW00mmmn1NPKa7UyjPCwi/SQsUYyXCE65xXZKElKP5HtbzWZmPjH9SaxPdYdLrXDQ6hrnGMfKU4xfybJ9HXfPX79Eeedscte6Q6+ejo0ujok6/oYztnB7spOWeCa4rMlJvyLumxRmvbLeN+doV8t5pWKV9mN2N0l1Wmmt6c76n79VsnNOPPdcup/LtLGbSY8kcRtPvCOma1Z55hPSfZldU679Px02qjv1Y+o/rV92M9XlyPNLmtaJpfzV7/AOTLSInevaWGLaEA6boI42FLPPSX/Pfx+Z8/m/8AZn5r9f04ap0Dp3tp6Nf3kn+zVOX8C/i88Ir+WXdzRVQAAAAAAAAAAAAAAAAAwvSnZsdRRLMd5wUsx+3U1icfhx8irq8U3pvXvHMJsN9rbT2lwXaehlprp1S47vGMvt1v3Zfz70yXBljLSLOMlOi2y2JXC92btXUaZ/RWOK5wftQfjF/muJFlwY8nmj/LumS1O0tw2V0zpniOoi6ZfbjmVb/jH5+JmZvw+9eac/VbpqYnzcMxtyqOq0V6rcZqVbcHFqSk4tSSTXfHBWwWnHmr1ccpckdWOdmldJ/pa9Fqlxjbpo1y7ra295fvP4GrpfBa+P2nf9pU83MVt8GBLiBuV+zbIbKtrscZ+plTfROLbj6u3CaT87PiZlctZ1UWr67xP7fcLU0mMUxPzhp5pqoB1LWQ9RsVQfBrS1Ra+9LdT/Nnzm/XnmfjLR22pEMP6LtHv7Q38cKabJZ7JPEF8pSNTTxvdXyz4XXy+rAAAAAAAAAAAAAAIyBS5AN8BvoDm3pB6M763ql7S3pU8s85Uv8ANf8AJnW/8bLv/tt/C1H+rTb1hy7u6muT4NPsNHuqmQJAu9n7Rv00t6myVb5pcYy8YvgyPJipkja0buq3tXtLK7D11NkbNHqsQpvnv1zjwWmv5NZ6o8v+Wyvnx3rMZcfMx3+MJcdomJpbtP8AC12vsDU6Rt2RzXnEbocYSz1d8X3P5kmHU48vlnn2cXxWp3Z7o/0n01Wjen1UZW7j9iG4pqyvO8k88OD7eWCpqNHktl68fG/8JseasU6bNW2hfC22yyEFVCc241p5UE+RoY6zWkVmd5V7TvO8Ktm6R6i+mlLPrbIxfdBv2n5Ry/I5zX6Mc29oKV6rRDpPT29R0sK1122Lh9yKbfzcTA08eLdfuvvRXs/cou1DXG+ajHvrhnj+1KS/VNrS14mypmnnZvBaQgAAAAAAAAAAAAQBQ2BQ2BQ5Aec5gWG0LIzg4WLMXz5xfKS7zjJjjJWa2dVtNZ3hy3pbsFuUrqlmxcbYRX9Yv+5FdvaufjnNHDknBb8rJ29J+/T6J8lIyR11/dpqkaKsqyBUmBKYF7/Seo9S9O7Zul7v0baklhppLPFLKXBEf5NOvr25dddunp34WpI5SBuno22W5WWauS9mtOFXfY/fkvBcM/efYZX4lm4jHHzn+y1pqf7l50l39bra9NVxcMQXZvvjOT7lz/CVtNjmY2jvKW87cunbO0kNPTXTD3aoKK7Xjrb72+PmblaxWIiFGZ3ndcnTxIAAAAAAAAAAAAQwKJAecgPGxgWd1jAx+psbygNe2lXPri845cyHNhrlrtLul5pO8NP2xsaN7lbRiNv16niKnLtXKMvk+55zUx5rYZ/Lydvv+E9scZI6qNXlmLcZJxlF4cZJpp9jT6jQiYmN4VpjbiUqR68VpgVpgVJgZDYmyrdbcqq+HU7LMezVX9p9/B4XN9ybUGoz1w13nv6JMeObzs6jqLatnaWMKljcjuUw65Tm+b7Xl5b5t958/HVlvvPq0J2rG0LzoZ0flp09Rev+puT4Prqg3lp/efP4dpvafD0RvPdQy5OriG1JllEkCQJAAAAAAAAAAIAhgUsDzkB4ziBbWwAsb6QMZqaAMJrtBl5XCS6pLr8+1HGTHW8bWdVtNZ3hgtpaCu1YvjxSxG2PCUV4/wAHlFCcWXBO9OY++8LMXpk4t3YLVdHL48apRujyWVXPw4vdfjkkpraz5o2cW08+ixnodTDhKi/yqnJfFJosxnxz2tCKcd49HpRoNTN4jRqG/wDBsS+LWDy2oxV72gjHefRsGyehmptad8lp4c4pxsufdwzGPjl+BUy/iFY4pG/0T00sz5nQNlaGrTQVOnrwuvdXGU5fanJ+HW+zyM2K5dRf3n6LUzTFVldBsiKsWouasuXuL+zoXZBPrf3nx8DY0+krij3lRyZpv8maiy2hVpgVICoABIAAAAAAAACAIAhgUMChoDynAC3sqAtLtOBjtRpAMZqND3AYnUbLkuNcnB9mMxfly8sEOTT4794SVy2r2WctVqaX7dSkvtQk18mmVLaCPSyaNT7wyOzNpK2Si062+cnkj/7db/6df9VHs2jS6FPi5uS+6t0lp+H44807/wAOLam09uGV09cYrEUkvzfa+0vVrWsbVjZXmZmd5XUGdPHrFgVpgVoCpASBIAAAAAAAACAAFLApaApaApaAolEDynWBb2UgWtulAs7dF3AWlmg7sgW/9BxbzHg+zkBldFXOvCfxAzFLyB7xiB6JAVoCpAVoCQJAAAAAAAAAQAAgCGgKcAQ0BS0BS4gebiBRKAHlKoCh0oCFUB6RrA9q4Ae0UBWkBUkBUkBKAkCQAAAAAAAAACAAEAQBGAIwBS0BDQFLiBS4gUuAEbgEqIFaiBXECtICpICcASBIAAAAAAAAAAAAQAAgABGAIwBDQEYAjAEYAjdAnADAFSQFaAqAASAAAAAAAAAAAAAABAAABADAEYAYAjAEYAYAYAnADAFSAkCQAAAAAAAAAAAAAAAEAAAACAAACADAAAAEgSAQEgAAAAAAAf/Z";
  adminDetails:any={}
  profileStatus:any=false

  constructor(private admin:AdminService,private toastr:ToastrService,private router:Router) { }

  ngOnInit(){
    this.admin.getAdmin().subscribe((res:any)=>{
      console.log(res)
      this.adminDetails=res
      if(res.profile){
        this.profilePicture=res.profile
      }
    })
  }

  

  onStatus(){
    this.profileStatus=!this.profileStatus
  }

  getFile(event:any){
    const file=event.target.files[0]
    let fr=new FileReader()
    fr.readAsDataURL(file)
    fr.onload=(event:any)=>{
      console.log(event.target.result)
      this.profilePicture=event.target.result
      this.adminDetails.profile=event.target.result
    }
  }

  handleSubmit(){
    console.log(this.adminDetails)
    this.admin.updateAdmin(this.adminDetails).subscribe({
      next:(res:any)=>{
        this.toastr.success("Profile Updated Successfully")
        this.onStatus()
        this.ngOnInit()
      },
      error:(error:any)=>{
        console.log(error)
        this.toastr.error("Error occured")
      }
    })
  }

}
